# ğŸ¤– ç³»ç»Ÿå›¾è¡¨ç»˜åˆ¶ä»£ç†

åŸºäº DeepSeek API çš„æ™ºèƒ½ç³»ç»Ÿå›¾è¡¨ç”Ÿæˆå·¥å…·ï¼Œèƒ½å¤Ÿè‡ªåŠ¨ç†è§£ç”¨æˆ·éœ€æ±‚å¹¶ç”Ÿæˆå¤šç§ç±»å‹çš„ä¸“ä¸šå›¾è¡¨ã€‚

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![DeepSeek](https://img.shields.io/badge/Powered%20by-DeepSeek-orange.svg)](https://deepseek.com)

## ğŸŒŸ é¡¹ç›®ç‰¹è‰²

- **ğŸ§  æ™ºèƒ½ç†è§£**: è‡ªåŠ¨åˆ†æç”¨æˆ·éœ€æ±‚ï¼Œè¯†åˆ«æœ€é€‚åˆçš„å›¾è¡¨ç±»å‹
- **ğŸ“Š å¤šå›¾è¡¨æ”¯æŒ**: æ”¯æŒ9ç§ä¸“ä¸šå›¾è¡¨ç±»å‹ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚
- **ğŸ”„ è‡ªåŠ¨ä¼˜åŒ–**: å†…ç½®è´¨é‡æ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤æœºåˆ¶
- **ğŸŒ å¤šç§æ¥å£**: æ”¯æŒå‘½ä»¤è¡Œã€Webç•Œé¢å’Œäº¤äº’å¼æ¨¡å¼
- **âš¡ é«˜æ€§èƒ½**: å¼‚æ­¥å¤„ç†ï¼Œæ”¯æŒå¹¶å‘ä¼šè¯ç®¡ç†
- **ğŸ¯ ä¸ªæ€§åŒ–**: å­¦ä¹ ç”¨æˆ·åå¥½ï¼Œæä¾›ä¸ªæ€§åŒ–å»ºè®®

## ğŸ“‹ æ”¯æŒçš„å›¾è¡¨ç±»å‹

| å›¾è¡¨ç±»å‹ | æè¿° | é€‚ç”¨åœºæ™¯ |
|---------|------|----------|
| ğŸ”„ æµç¨‹å›¾ | ä¸šåŠ¡æµç¨‹å’Œé€»è¾‘æµç¨‹ | ä¸šåŠ¡åˆ†æã€æµç¨‹è®¾è®¡ |
| ğŸ—ï¸ ç³»ç»Ÿæ¶æ„å›¾ | ç³»ç»Ÿç»„ä»¶å’Œæ¶æ„è®¾è®¡ | æŠ€æœ¯æ¶æ„ã€ç³»ç»Ÿè®¾è®¡ |
| ğŸ“Š E-Rå›¾ | æ•°æ®åº“å®ä½“å…³ç³» | æ•°æ®åº“è®¾è®¡ã€æ•°æ®å»ºæ¨¡ |
| ğŸ¯ UMLç±»å›¾ | é¢å‘å¯¹è±¡è®¾è®¡ | è½¯ä»¶è®¾è®¡ã€ä»£ç æ¶æ„ |
| ğŸ‘¤ UMLç”¨ä¾‹å›¾ | ç”¨æˆ·äº¤äº’åœºæ™¯ | éœ€æ±‚åˆ†æã€åŠŸèƒ½è®¾è®¡ |
| â° æ—¶åºå›¾ | æ—¶é—´åºåˆ—äº¤äº’ | æ¥å£è®¾è®¡ã€äº¤äº’æµç¨‹ |
| ğŸ¬ æ´»åŠ¨å›¾ | æ´»åŠ¨å’Œå†³ç­–æµç¨‹ | ä¸šåŠ¡æµç¨‹ã€ç®—æ³•è®¾è®¡ |
| ğŸ¤ åä½œå›¾ | å¯¹è±¡é—´åä½œå…³ç³» | ç³»ç»Ÿäº¤äº’ã€ç»„ä»¶åä½œ |
| ğŸŒ³ åŠŸèƒ½ç»“æ„å›¾ | åŠŸèƒ½å±‚æ¬¡ç»“æ„ | åŠŸèƒ½åˆ†è§£ã€æ¨¡å—è®¾è®¡ |

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```mermaid
graph TB
    A[ç”¨æˆ·è¾“å…¥] --> B[ä¸»æ§åˆ¶å™¨]
    B --> C[éœ€æ±‚ç†è§£ä»£ç†]
    B --> D[ç³»ç»Ÿç†è§£ä»£ç†]
    B --> E[å›¾è¡¨ç”Ÿæˆä»£ç†]
    B --> F[è´¨é‡æ£€æŸ¥ä»£ç†]
    B --> G[äº¤äº’ä¼˜åŒ–ä»£ç†]
    
    C --> H[DeepSeek API]
    D --> H
    E --> H
    F --> H
    G --> H
    
    H --> I[å›¾è¡¨è¾“å‡º]
    I --> J[Webç•Œé¢]
    I --> K[å‘½ä»¤è¡Œ]
    I --> L[JSONæ–‡ä»¶]
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style H fill:#fff3e0
    style I fill:#e8f5e8
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### ğŸ¯ å…­å¤§æ™ºèƒ½ä»£ç†

```mermaid
graph LR
    A[éœ€æ±‚ç†è§£ä»£ç†] --> B[ç³»ç»Ÿç†è§£ä»£ç†]
    B --> C[å›¾è¡¨ç”Ÿæˆä»£ç†]
    C --> D[è´¨é‡æ£€æŸ¥ä»£ç†]
    D --> E[äº¤äº’ä¼˜åŒ–ä»£ç†]
    E --> F[ä¸»æ§åˆ¶å™¨]
    F --> A
    
    style A fill:#ffebee
    style B fill:#e3f2fd
    style C fill:#e8f5e8
    style D fill:#fff3e0
    style E fill:#f3e5f5
    style F fill:#fce4ec
```

1. **éœ€æ±‚ç†è§£ä»£ç†** - åˆ†æç”¨æˆ·è¾“å…¥ï¼Œè¯†åˆ«å›¾è¡¨ç±»å‹å’Œå…³é”®è¦ç´ 
2. **ç³»ç»Ÿç†è§£ä»£ç†** - æ·±åº¦ç†è§£ç³»ç»Ÿæ¶æ„å’Œä¸šåŠ¡é€»è¾‘
3. **å›¾è¡¨ç”Ÿæˆä»£ç†** - ç”Ÿæˆé«˜è´¨é‡çš„Mermaidå›¾è¡¨ä»£ç 
4. **è´¨é‡æ£€æŸ¥ä»£ç†** - å¤šç»´åº¦è´¨é‡è¯„ä¼°å’Œè‡ªåŠ¨ä¿®å¤
5. **äº¤äº’ä¼˜åŒ–ä»£ç†** - ä¸ªæ€§åŒ–å»ºè®®å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–
6. **ä¸»æ§åˆ¶å™¨** - åè°ƒå„ä»£ç†ï¼Œç®¡ç†å¤„ç†æµç¨‹

### ğŸ“Š å¤„ç†æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant M as ä¸»æ§åˆ¶å™¨
    participant R as éœ€æ±‚ç†è§£
    participant S as ç³»ç»Ÿç†è§£
    participant D as å›¾è¡¨ç”Ÿæˆ
    participant Q as è´¨é‡æ£€æŸ¥
    participant I as äº¤äº’ä¼˜åŒ–
    
    U->>M: æäº¤éœ€æ±‚
    M->>R: åˆ†æéœ€æ±‚
    R-->>M: éœ€æ±‚ç»“æœ
    M->>S: ç³»ç»Ÿåˆ†æ
    S-->>M: ç³»ç»Ÿç»“æœ
    M->>D: ç”Ÿæˆå›¾è¡¨
    D-->>M: å›¾è¡¨ä»£ç 
    M->>Q: è´¨é‡æ£€æŸ¥
    Q-->>M: è´¨é‡æŠ¥å‘Š
    M->>I: ä¼˜åŒ–å»ºè®®
    I-->>M: ä¼˜åŒ–ç»“æœ
    M-->>U: æœ€ç»ˆå›¾è¡¨
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“¦ å®‰è£…ä¾èµ–

```bash

cd system-diagram-agent

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®æ‚¨çš„ DEEPSEEK_API_KEY
```


### ğŸ® ä½¿ç”¨æ–¹å¼

#### 1. äº¤äº’æ¨¡å¼ï¼ˆæ¨èæ–°æ‰‹ï¼‰
```bash
python main.py interactive
```

#### 2. å‘½ä»¤è¡Œæ¨¡å¼
```bash
python main.py cli "è®¾è®¡ç”¨æˆ·ç™»å½•ç³»ç»Ÿçš„æµç¨‹å›¾"
```

#### 3. Webç•Œé¢æ¨¡å¼
```bash
python main.py web
# è®¿é—® http://localhost:5000
```

#### 4. å¥åº·æ£€æŸ¥
```bash
python main.py health
```

## ğŸŒ Webç•Œé¢é¢„è§ˆ

Webç•Œé¢æä¾›ç›´è§‚çš„å›¾è¡¨ç”Ÿæˆä½“éªŒï¼š

- **ğŸ“ æ™ºèƒ½è¾“å…¥æ¡†** - è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚
- **âš™ï¸ ä¸ªæ€§åŒ–è®¾ç½®** - è°ƒæ•´ç”Ÿæˆå‚æ•°å’Œåå¥½
- **ğŸ“Š å®æ—¶é¢„è§ˆ** - Mermaidå›¾è¡¨å®æ—¶æ¸²æŸ“
- **ğŸ’¾ å¯¼å‡ºåŠŸèƒ½** - æ”¯æŒå¤šç§æ ¼å¼å¯¼å‡º
- **ğŸ“š ç¤ºä¾‹åº“** - ä¸°å¯Œçš„ç¤ºä¾‹æ¨¡æ¿

## ğŸ“ é¡¹ç›®ç»“æ„

```
system-diagram-agent/
â”œâ”€â”€ ğŸ“ agents/              # æ™ºèƒ½ä»£ç†æ¨¡å—
â”‚   â”œâ”€â”€ base_agent.py       # åŸºç¡€ä»£ç†æŠ½è±¡ç±»
â”‚   â”œâ”€â”€ requirement_agent.py # éœ€æ±‚ç†è§£ä»£ç†
â”‚   â”œâ”€â”€ system_agent.py     # ç³»ç»Ÿç†è§£ä»£ç†
â”‚   â”œâ”€â”€ diagram_agent.py    # å›¾è¡¨ç”Ÿæˆä»£ç†
â”‚   â”œâ”€â”€ quality_agent.py    # è´¨é‡æ£€æŸ¥ä»£ç†
â”‚   â”œâ”€â”€ interaction_agent.py # äº¤äº’ä¼˜åŒ–ä»£ç†
â”‚   â””â”€â”€ main_controller.py  # ä¸»æ§åˆ¶å™¨
â”œâ”€â”€ ğŸ“ api/                 # APIå®¢æˆ·ç«¯
â”‚   â””â”€â”€ deepseek_client.py  # DeepSeek APIå®¢æˆ·ç«¯
â”œâ”€â”€ ğŸ“ prompts/             # æç¤ºè¯æ¨¡æ¿
â”‚   â””â”€â”€ prompt_templates.py # æç¤ºè¯ç®¡ç†
â”œâ”€â”€ ğŸ“ utils/               # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ logger.py           # æ—¥å¿—ç®¡ç†
â”‚   â””â”€â”€ validators.py       # æ•°æ®éªŒè¯
â”œâ”€â”€ ğŸ“ web/                 # Webç•Œé¢
â”‚   â”œâ”€â”€ app.py              # Flaskåº”ç”¨
â”‚   â””â”€â”€ templates/          # HTMLæ¨¡æ¿
â”œâ”€â”€ ğŸ“ logs/                # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ config.py               # é…ç½®ç®¡ç†
â”œâ”€â”€ main.py                 # ä¸»å…¥å£
â”œâ”€â”€ quick_start.py          # å¿«é€Ÿå¯åŠ¨
â”œâ”€â”€ test_example.py         # åŠŸèƒ½æµ‹è¯•
â””â”€â”€ requirements.txt        # ä¾èµ–åˆ—è¡¨
```

## âš™ï¸ é…ç½®é€‰é¡¹

### ğŸ”‘ ç¯å¢ƒå˜é‡

| å˜é‡å | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `DEEPSEEK_API_KEY` | string | - | DeepSeek APIå¯†é’¥ï¼ˆå¿…å¡«ï¼‰ |
| `DEEPSEEK_BASE_URL` | string | https://api.deepseek.com/v1 | APIåŸºç¡€URL |
| `DEEPSEEK_MODEL` | string | deepseek-chat | æ¨¡å‹åç§° |
| `LOG_LEVEL` | string | INFO | æ—¥å¿—çº§åˆ« |
| `WEB_HOST` | string | localhost | WebæœåŠ¡åœ°å€ |
| `WEB_PORT` | int | 5000 | WebæœåŠ¡ç«¯å£ |
| `MAX_CONCURRENT_SESSIONS` | int | 10 | æœ€å¤§å¹¶å‘ä¼šè¯æ•° |

### ğŸ›ï¸ é«˜çº§é…ç½®

```python
# æ§åˆ¶å™¨é…ç½®
controller_config = ControllerConfig(
    max_concurrent_sessions=20,    # å¹¶å‘ä¼šè¯æ•°
    auto_quality_check=True,       # è‡ªåŠ¨è´¨é‡æ£€æŸ¥
    auto_fix_diagrams=True,        # è‡ªåŠ¨ä¿®å¤å›¾è¡¨
    enable_interaction_optimization=True  # å¯ç”¨äº¤äº’ä¼˜åŒ–
)
```

## ğŸ“Š è´¨é‡ä¿è¯

### ğŸ” äº”ç»´è´¨é‡è¯„ä¼°

```mermaid
radar
    title å›¾è¡¨è´¨é‡è¯„ä¼°ç»´åº¦
    "è¯­æ³•æ­£ç¡®æ€§" : 0.9
    "é€»è¾‘å®Œæ•´æ€§" : 0.85
    "è§†è§‰æ¸…æ™°åº¦" : 0.8
    "ä¿¡æ¯å‡†ç¡®æ€§" : 0.9
    "ç”¨æˆ·å‹å¥½æ€§" : 0.75
```

- **è¯­æ³•æ­£ç¡®æ€§** - Mermaidè¯­æ³•éªŒè¯
- **é€»è¾‘å®Œæ•´æ€§** - å›¾è¡¨é€»è¾‘ç»“æ„æ£€æŸ¥
- **è§†è§‰æ¸…æ™°åº¦** - å¸ƒå±€å’Œå¯è¯»æ€§è¯„ä¼°
- **ä¿¡æ¯å‡†ç¡®æ€§** - å†…å®¹ä¸éœ€æ±‚åŒ¹é…åº¦
- **ç”¨æˆ·å‹å¥½æ€§** - æ˜“ç†è§£å’Œæ˜“ä½¿ç”¨ç¨‹åº¦

### ğŸ”§ è‡ªåŠ¨ä¿®å¤æœºåˆ¶

- **è¯­æ³•é”™è¯¯ä¿®å¤** - è‡ªåŠ¨çº æ­£Mermaidè¯­æ³•é—®é¢˜
- **å¸ƒå±€ä¼˜åŒ–** - æ”¹å–„å›¾è¡¨å¸ƒå±€å’Œè¿æ¥
- **æ ‡ç­¾è§„èŒƒåŒ–** - ç»Ÿä¸€å‘½åå’Œæ ‡ç­¾æ ¼å¼
- **å†—ä½™æ¸…ç†** - ç§»é™¤é‡å¤å’Œæ— ç”¨å…ƒç´ 

## ğŸ§ª æµ‹è¯•ä¸éªŒè¯

### ğŸƒâ€â™‚ï¸ è¿è¡Œæµ‹è¯•

```bash
# å®Œæ•´åŠŸèƒ½æµ‹è¯•
python test_example.py

# å¥åº·æ£€æŸ¥
python main.py health

# å¿«é€ŸéªŒè¯
python quick_start.py
```

### ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **å“åº”æ—¶é—´**: < 10ç§’ï¼ˆå•å›¾è¡¨ï¼‰
- **å¹¶å‘æ”¯æŒ**: 10ä¸ªå¹¶å‘ä¼šè¯
- **æˆåŠŸç‡**: > 95%
- **è´¨é‡åˆ†æ•°**: å¹³å‡ 85+/100

## ğŸ”§ å¼€å‘æŒ‡å—

### ğŸ—ï¸ æ‰©å±•æ–°å›¾è¡¨ç±»å‹

1. åœ¨ `utils/validators.py` ä¸­æ·»åŠ å›¾è¡¨ç±»å‹
2. åœ¨ `prompts/prompt_templates.py` ä¸­æ·»åŠ æç¤ºè¯
3. åœ¨ `agents/diagram_agent.py` ä¸­å®ç°ç”Ÿæˆé€»è¾‘
4. æ›´æ–°è´¨é‡æ£€æŸ¥è§„åˆ™

### ğŸ¨ è‡ªå®šä¹‰ä»£ç†

```python
from agents.base_agent import BaseAgent

class CustomAgent(BaseAgent):
    def process(self, input_data, context=None):
        # å®ç°è‡ªå®šä¹‰é€»è¾‘
        result = self._make_api_call(prompt)
        return self.format_output(result)
```


## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- [DeepSeek](https://deepseek.com) - æä¾›å¼ºå¤§çš„AIæ¨¡å‹æ”¯æŒ
- [Mermaid](https://mermaid-js.github.io/) - ä¼˜ç§€çš„å›¾è¡¨æ¸²æŸ“å¼•æ“
- [Flask](https://flask.palletsprojects.com/) - è½»é‡çº§Webæ¡†æ¶
- [Rich](https://rich.readthedocs.io/) - ç¾è§‚çš„ç»ˆç«¯è¾“å‡º
